<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Cat Image Generator</title>
  </head>
  <body>
    <h1>Welcome to the Cat Image Generate</h1>

    <img src="" alt="No image loaded" id="image" />
    <fieldset>
      <button id="generate-character-btn">Generate New Cat Images</button>
    </fieldset>

    <script>
      document
        .getElementById("generate-character-btn")
        .addEventListener("click", generateImage);

      async function generateImage() {
        const apiUrl = "https://api.thecatapi.com/v1/images/search"; 
        
        const params = {
          limit: 1, 
        };

        const queryParams = new URLSearchParams(params);

        const requestUrl = `${apiUrl}?${queryParams.toString()}`;

        fetch(requestUrl, {
          headers: {
            'x-api-key': 'live_mT4l3NxZlGMflY988u1iQdGRJkthCXmeb4j74pKvy7hfCjp8gWaTQA4DQMYNu54T' // API key
          }
        })
          .then((response) => {
            if (response.ok) {
              return response.json();
            } else {
              throw new Error("Request failed with status code: " + response.status);
            }
          })
          .then((data) => {
            if (data.length > 0) {
              const characterImg = document.getElementById("image");
              characterImg.src = data[0].url; // Assuming 'url' is the property containing the image URL
            } else {
              alert("No images found.");
            }
          })
          .catch((error) => {
            console.error("Error:", error.message);
            alert("Error: " + error.message);
          });
      }
    </script>
  </body>
</html>
